# Обход белых списков через CDN  
## Курсовая работа по специальности «Обеспечение информационной безопасности»

---

## СОДЕРЖАНИЕ

1. Введение  
2. Цель и задачи работы  
3. Условные обозначения и термины  
4. Теоретическая часть  
   4.1 Белые списки операторов связи  
   4.2 CDN: принцип работы  
   4.3 VPN и прокси-сервисы  
   4.4 Почему используется CDN для обхода ограничений  
5. Практическая часть  
   5.1 Подготовка окружения  
   5.2 Требования к ПО и инфраструктуре  
   5.3 Настройка Xray (Inbound)  
   5.4 Настройка Remnawave / 3x-ui  
   5.5 Настройка CDN (Yandex / VK / Edge)  
   5.6 Настройка DNS (CNAME)  
6. Схема работы решения  
7. Ограничения и риски  
8. Заключение  
9. Обновления и актуальность  

---

## 1. ВВЕДЕНИЕ

В условиях усиления сетевой фильтрации и применения белых списков операторами связи
доступ к VPN и прокси-сервисам становится ограниченным.  
Одним из способов обхода подобных ограничений является маскировка трафика под
разрешённые домены.

Данная работа описывает практический метод обхода белых списков с использованием
CDN-провайдеров (Yandex CDN, VK CDN, EdgeCDN) и протокола XHTTP в XRay.

⚠️ ВАЖНО:  
Метод не гарантирует работоспособность во всех регионах и у всех операторов.  
Материал предоставляется «как есть» и носит учебно-исследовательский характер.

---

## 2. ЦЕЛЬ И ЗАДАЧИ РАБОТЫ

### Цель работы  
Изучить и реализовать способ обхода белых списков операторов связи
с использованием CDN как промежуточного пункта.

### Задачи:
- изучить принцип работы белых списков;
- разобрать архитектуру CDN;
- настроить VPN-сервер с поддержкой XHTTP;
- интегрировать VPN с CDN;
- проанализировать ограничения метода.

---

## 3. УСЛОВНЫЕ ОБОЗНАЧЕНИЯ И ТЕРМИНЫ

**CDN (Content Delivery Network)** — сеть распределённых серверов доставки контента.  

**Белый список** — список разрешённых IP-адресов или доменов, доступных пользователю.  

**Xray** — ядро, используемое для VPN.  

**XHTTP** — транспортный протокол XRay, имитирующий HTTP-трафик.  

**Inbound** — входящее соединение на сервере VPN.  

**CNAME** — DNS-запись, указывающая домен на другой домен.  

---

## 4. ТЕОРЕТИЧЕСКАЯ ЧАСТЬ

### 4.1 Белые списки операторов связи

Белые списки применяются для ограничения интернет-доступа.
Абоненту разрешены соединения только с заранее определёнными ресурсами
(госуслуги, ВКонтакте, Мах и сервисы яндекса).

Все остальные IP-адреса и домены блокируются на уровне DPI или маршрутизации (В каждом регионе по разному).

---

### 4.2 CDN: принцип работы

CDN выступает в роли промежуточного сервера между клиентом и VPN-сервером.

Пользователь → CDN → VPN сервер

Таким образом, трафик маскируется под легитимный.

---

### 4.3 VPN и прокси-сервисы

VPN создаёт зашифрованный туннель между клиентом и сервером.
Однако стандартные VPN легко определяются провайдером и блокируются.

Использование XHTTP позволяет имитировать обычные HTTP-запросы.

---

### 4.4 Почему используется CDN для обхода ограничений

Причины:
- CDN домены присутствуют в белых списках;
- CDN скрывает реальный IP адрес сервера;
- HTTPS/HTTP-трафик выглядит легитимно;
- сложнее блокировать без ущерба сервисам.

---

## 5. ПРАКТИЧЕСКАЯ ЧАСТЬ

### 5.1 Подготовка окружения

Необходимо подготовить:
- домен (например: example.com);
- ВДС сервер;
- установленный XRay с поддержкой XHTTP;
- панель управления Remnawave;
- аккаунт в CDN-сервисе.

---

### 5.2 Требования

```
• Домен (любой DNS-провайдер)
• Сервер (VPS/VDS)
• XRay (с XHTTP)
• Remnawave
• Yandex CDN / VK CDN / EdgeCDN
```

---

### 5.3 Настройка Xray (Inbound)

```
{
  "tag": "Мобильный обход",
  "port": 80,
  "listen": "0.0.0.0",
  "protocol": "vless",
  "settings": {
    "clients": [],
    "decryption": "none"
  },
  "sniffing": {
    "enabled": false
  },
  "streamSettings": {
    "network": "xhttp",
    "security": "none",
    "xhttpSettings": {
      "mode": "packet-up",
      "path": "/",
      "xPaddingBytes": "100-1000",
      "scMaxBufferedPosts": 30,
      "scMaxEachPostBytes": "1000000",
      "scStreamUpServerSecs": "20-80"
    }
  }
}
```

(Комментарии:  
`port 80` — используется для совместимости с CDN.  
`packet-up` — корректная работа POST-запросов с CDN.  
`xPaddingBytes` — маскировка размера пакетов.)

---

### 5.4 Настройка Remnawave

1. Создать новый inbound.
2. Привязать его к хосту.
3. Указать домен (example.com).
4. Порт: 80 или 443 (при TLS\Reality).

---

### 5.5 Настройка CDN

#### Yandex CDN

```
Источник: IP:PORT сервера (Только айпи если порт 80)
Домен: example.com
Протокол: HTTP
```

⚠️ С декабря 2025 Yandex может блокировать VPN-трафик, если заметит аномальное использование.

---

#### VK CDN

```
Источник: IP:PORT
Протокол: HTTP / HTTPS
Персональный домен: test.example.com
```

⚠️ POST-запросы временно ограничены.

---

#### EdgeCDN

```
Источник: IP
Кеширование: выключено
HTTP-методы: разрешены все
```

⚠️ Возможна ошибка 451 (Работает несколько минут и отказ).

---

### 5.6 Настройка DNS (CNAME)

```
Тип: CNAME
Имя: test
Цель: CDN-домен (выданный сервисом)
```

---

## 6. СХЕМА РАБОТЫ

```
[ Клиент ]
     |
     | HTTPS / HTTP
     v
[ CDN (Yandex / VK) ]
     |
     | HTTP POST (XHTTP)
     v
[ Xray сервер ]
     |
     v
[ Интернет ]
```

---

## 7. ОГРАНИЧЕНИЯ И РИСКИ

- метод не работает с Мегафоном (после 26.11.2025);
- XHTTP легко определяется по сигнатурам;
- CDN-сервис может заблокировать аккаунт;
- нестабильность по регионам.

---

## 8. ЗАКЛЮЧЕНИЕ

В ходе работы был реализован метод обхода белых списков
путём маскировки VPN-трафика под разрешенный айпи.

Метод актуален как учебный и исследовательский пример,
но требует постоянной адаптации.

---

## 9. ОБНОВЛЕНИЯ

**UPD 23.12.2025**  
XHTTP имеет узнаваемые заголовки.  
WebSocket ограничен на большинстве CDN.  
Перспективы метода — ограничены.

---

## ИСТОЧНИК

При публикации указывать ссылку на первоисточник.
Сделано студентом 3 курса, специальности ОИБ (обеспечение информационной безопасности) для курсового проекта на тему "шифрование сетевого трафика, end-to-end шифрование".
Автор материала не несет ответственности за использование представленной выше информации.
Связь - @XConnectSupportBot
